@model Application.Responses.ResponseModelUsuario

@{
    bool icAdicionar = Model is null;

    Layout = null;
    var NmCurso = String.Empty;
    var NmTurma = String.Empty;
    var imgSrc = String.Empty;
    var NmUsuario = String.Empty;

    if (!icAdicionar) {
        NmCurso = ViewBag.NmCurso ?? String.Empty;
        NmTurma = ViewBag.NmTurma ?? String.Empty;
        imgSrc = Model?.DsFoto != null ? $"data:image/jpeg;base64,{Convert.ToBase64String(Model.DsFoto)}" : String.Empty;
        NmUsuario = Model?.NmUsuario;
    }
}

<link rel="stylesheet" href="~/css/Sistema/InfoUsuario.css">

 
@Html.HiddenFor(model => model.CdUsuario)
@Html.HiddenFor(model => model.DsCpf)

<div id="divImgUsuario">

    @if (!String.IsNullOrEmpty(imgSrc)) {
        <img height="122" width="122" src="@imgSrc" alt="Foto do Usuario" />
    } else {
        <img height="122" width="122" />
    }

    <div>
        <button id="btnTrocarFoto"><b class="linear1">Trocar foto</b></button>
        <button id="btnExcluirFoto"><b>Excluir foto</b></button>
    </div>
</div>

<div id="divNomeUsuario">
    <label for="divNomeUsuario" class="linear1">Nome:</label><br />
    <input id="txtNomeUsuario" class="txtInfoUsuario" asp-for="NmUsuario" type="text" placeholder="Digite o nome..." disabled />
</div>

<div id="divEmailUsuario">
    <label for="divEmailUsuario" class="linear1">Email:</label><br />
    <input id="txtEmailUsuario" class="txtInfoUsuario" asp-for="DsEmail" type="text" placeholder="Digite o e-mail..." disabled />
</div>

<div id="divCPFUsuario">
    <label for="divCPFUsuario" class="linear1">CPF:</label><br />
    <input id="txtCPFUsuario" class="txtInfoUsuario" asp-for="DsCpf" type="text" placeholder="Digite o CPF..." disabled />
</div>

<div id="divGrupoPC1">
    <div id="divGeneroUsuario">
        <label for="divGeneroUsuario" class="linear1">Gênero:</label><br />
        <select id="txtGeneroUsuario" class="txtInfoUsuario" asp-for="DsGenero" disabled>
            <option value="0">Selecione</option>
            <option value="1">Feminino</option>
            <option value="2">Masculino</option>
        </select>
    </div>

    <div id="divNascimentoUsuario">
        <label for="divNascimentoUsuario" class="linear1">Nascimento:</label><br />
        <input id="txtNascimentoUsuario" class="txtInfoUsuario" asp-for="DtNascimento" type="date" placeholder="" disabled />
    </div>

    <div id="divTelefoneUsuario">
        <label for="divTelefoneUsuario" class="linear1">Telefone:</label><br />
        <input id="txtTelefoneUsuario" class="txtInfoUsuario" asp-for="DsTelefone" type="text" placeholder="Digite o telefone..." disabled />
    </div>
</div>

<div id="divSituacaoUsuario">
    <label for="txtSituacaoUsuario" class="linear1">Situação:</label><br />
    <input id="txtSituacaoUsuario" class="txtInfoUsuario" asp-for="IcHabilitadoTurma" type="text" placeholder="" disabled />
</div>

<div id="divCargosUsuario">
    <label for="txtCargoUsuario" class="linear1">Cargo(s):</label>
    <div id="divCargos">
        <input id="txtCargoUsuario" class="txtInfoUsuario" type="text" value="Professor" disabled />
        <input id="txtCargoUsuario" class="txtInfoUsuario" type="text" value="Professor" disabled />
    </div>
</div>

<br/>
<label id="lblListaCargo" for="listaCargo" class="linear1">Cargo(s):</label>
<div id="listaCargo">
    <div>
        Master
        <input type="checkbox"/>
    </div>
    <div>
        ADM
        <input type="checkbox"/>
    </div>
    <div>
        Professor
        <input type="checkbox"/>
    </div>
</div>

<div id="divBotaoAdicionar">
    <button id="btnConfirmarAdicionar" onclick="adicionarUsuario()"><b style="color: white;">Adicionar usuário</b></button>
</div>

<div id="divBotoesEditar">
    <button id="btnInativar" onclick="carregarInativarUsuario()"><b style="color: white;">Inativar usuário</b></button>
    <button id="btnEditar" onclick="carregarEdicaoUsuario()"><b class="linear1">Editar usuário</b></button>
</div>

<div id="divBotoesEdicao">
    <button id="btnCancelar" onclick="cancelarEdicaoUsuario()"><b class="linear1">Cancelar edição</b></button>
    <button id="btnSalvar" onclick="salvarInfoUsuario()"><b>Salvar</b></button>
</div>

<div id="divInativarUsuario">
    <b class="linear1">Tem certeza que deseja inativar o usuário:</b>
    <b class="linear1">@NmUsuario</b>
    <div id="divBotoesInativarUsuario">
        <button id="btnIgnorarInativarUsuario" onclick="cancelarInativarUsuario()"><b class="linear1">Não</b></button>
        <button id="btnInativarUsuario" onclick="inativarUsuario()"><b style="color: white;">Inativar</b></button>
    </div>
</div>

<div id="divBotaoAtivarUsuario">
    <button id="btnAtivarUsuario" onclick="carregarAtivarUsuario()"><b class="linear1">Ativar usuário</b></button>
</div>

<div id="divAtivarUsuario">
    <b class="linear1">Tem certeza que deseja ativar o usuário:</b>
    <b class="linear1">@NmUsuario</b>
    <div id="divBotoesAtivarUsuario">
        <button id="btnIgnorarAtivarUsuario" onclick="cancelarAtivarUsuario()"><b class="linear1">Não</b></button>
        <button id="btnConfirmarAtivarUsuario" onclick="ativarUsuario()"><b style="color: white;">Habilitar</b></button>
    </div>
</div>


<script type="text/javascript">
    atualizarBotoes();
    atualizarSituacao();

    function atualizarBotoes() {
        if ('@Model?.IcHabilitadoTurma' == 'False') {
            if (window.matchMedia("(max-width: 1200px)").matches) {
                $('#divBotoesEditarMobile').hide();
                $('#divBotaoAtivarUsuarioMobile').show();
            } else {
                $('#divBotoesEditar').hide();
                $('#divBotaoAtivarUsuario').show();
            }
        }
    }

    function atualizarSituacao() {
        if ('@Model?.IcHabilitadoTurma' != 'Null') {
            let txt = ('@Model?.IcHabilitadoTurma' == 'True') ? 'Habilitado' : 'Desabilitado';
            $("#txtSituacaoUsuario").val(txt);
        }
    }
</script>
