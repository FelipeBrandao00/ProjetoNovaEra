@{
    Layout = "_Layout";
    ViewData["Title"] = "Listar alunos";

    ViewData["PagePrev"] = new string[] { "Menu rápido", "Index", "Home" };
    ViewData["Page"] = "Alunos";
}

<link rel="stylesheet" href="~/css/Aluno/Index.css">
<link rel="stylesheet" href="~/css/Shared/Livro.css">

<!-- LIVRO -->

<div id="divLivro">
    <div id="capaLivro" class="MobileInvisible">
        <div id="paginaEsquerda" class="MobileInvisible">

            <div id="conteudoPagEsq" class="MobileInvisible">
                <div id="marcadorPagina"></div>

                <div id="divBusca">
                    <input id="txtBusca" type="text" placeholder="Digite o nome do aluno..." />
                    <button id="btnPesquisar" onclick="carregarListaAlunos()"><b class="linear1">Pesquisar</b></button>
                </div>

                <div id="msgListaAluno" class="divMsgSelecione">
                    <span class="linear1">Digite o nome do aluno e aperte em “Pesquisar!”</span>
                </div>

                <div id="divListaAluno"></div>
            </div>

        </div>
        <div id="paginaDireita" class="MobileInvisible">

            <div id="divTitInfoAluno">
                <button id="btnVoltarModal">
                    <i class="fa-solid fa-angle-left arrow-icon"></i>
                </button>
                <span class="linear1">Informações do aluno</span>
            </div>

            <div id="conteudoPagDir" class="MobileInvisible">
                <div id="msgInfoAluno" class="divMsgSelecione" @* style="display:none;" *@>
                    <span class="linear1">Selecione um aluno para ver suas informações!</span>
                </div>

                <div id="divInfoAluno" style="display:none;">

                    @*
                    <div id="divImgAluno">
                        <img height="122" width="122" />
                        <div>
                            <button id="btnTrocarFoto"><b class="linear1">Trocar foto</b></button>
                            <button id="btnExcluirFoto"><b>Excluir foto</b></button>
                        </div>
                    </div>

                    <div id="divNomeAluno">
                        <label for="divNomeAluno" class="linear1">Nome:</label><br />
                        <input id="txtNomeAluno" class="txtInfoAluno" type="text" placeholder="" />
                    </div>

                    <div id="divEmailAluno">
                        <label for="divEmailAluno" class="linear1">Email:</label><br />
                        <input id="txtEmailAluno" class="txtInfoAluno" type="text" placeholder="" />
                    </div>

                    <div id="divGrupoPC1">
                        <div id="divGeneroAluno">
                            <label for="divGeneroAluno" class="linear1">Gênero:</label><br />
                            <!--<input id="txtGeneroAluno" class="txtInfoAluno" type="text" placeholder="" />-->
                            <select id="txtGeneroAluno" class="txtInfoAluno">
                                <option value="0">Selecione</option>
                                <option value="1">Feminino</option>
                                <option value="2">Masculino</option>
                            </select>
                        </div>

                        <div id="divNascimentoAluno">
                            <label for="divNascimentoAluno" class="linear1">Nascimento:</label><br />
                            <input id="txtNascimentoAluno" class="txtInfoAluno" type="text" placeholder="" />
                        </div>

                        <div id="divTelefoneAluno">
                            <label for="divTelefoneAluno" class="linear1">Telefone:</label><br />
                            <input id="txtTelefoneAluno" class="txtInfoAluno" type="text" placeholder="" />
                        </div>
                    </div>

                    <div id="divGrupoPC2">
                        <div id="divCursoAluno">
                            <label for="divCursoAluno" class="linear1">Curso atual:</label><br />
                            <input id="txtCursoAluno" class="txtInfoAluno" type="text" placeholder="" />
                        </div>

                        <div id="divTurmaAluno">
                            <label for="divTurmaAluno" class="linear1">Turma atual:</label><br />
                            <input id="txtTurmaAluno" class="txtInfoAluno" type="text" placeholder="" />
                        </div>
                    </div>

                    <div id="divBotaoEditar">
                        <button id="btnEditar"><b class="linear1">Editar aluno</b></button>
                    </div>

                    <div id="divBotoesEdicao">
                        <button id="btnCancelar"><b class="linear1">Cancelar edição</b></button>
                        <button id="btnSalvar"><b>Salvar</b></button>
                    </div>
                    *@

                </div>
            </div>

            <div id="divBotaoEditarMobile">
                <button id="btnEditarMobile"><b class="linear1">Editar aluno</b></button>
            </div>

            <div id="divBotoesEdicaoMobile">
                <button id="btnCancelarMobile"><b class="linear1">Cancelar edição</b></button>
                <button id="btnSalvarMobile"><b>Salvar</b></button>
            </div>

        </div>
    </div>
</div>

<script type="text/javascript">

    document.addEventListener("DOMContentLoaded", carregarListaAlunos);

    function carregarListaAlunos() {
        event.preventDefault();

        $('#divInfoAluno').empty();
        $('#divInfoAluno').hide();
        $('#msgInfoAluno').show();

        $('#divListaAluno').empty();
        $('#msgListaAluno').show();

        let Busca = $('#txtBusca').val();

        $.ajax({
            url: '@Url.Action("ListarAlunos", "Aluno")',
            type: 'GET',
            async: true,
            data: {
                Busca: Busca
            },
            success: function (data) {
                $('#msgListaAluno').hide();
                $('#divListaAluno').html(data);
            }
        });
    }

    function CarregarInfoPadrao(cpfAluno) { //Implementando a função de carregamento de informação do aluno
        event.preventDefault();

        $('#divInfoAluno').empty();
        //$('#divInfoAluno').hide();
        //$('#msgInfoAluno').show();

        let Busca = $('#txtBusca').val();

        $.ajax({
            url: '@Url.Action("CarregarInfoAluno", "Aluno")',
            type: 'GET',
            async: true,
            data: {
                cpfAluno: cpfAluno
            },
            success: function (data) {
                $('#msgInfoAluno').hide();
                $('#divInfoAluno').html(data);
                $('#divInfoAluno').show();
            }
        });
    }

</script>